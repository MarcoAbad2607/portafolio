<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ICT Ticket Fallas — Caso completo</title>
  <meta name="description" content="Caso completo: ICT Ticket Fallas. Arquitectura, procedimiento, resultados y detalles técnicos." />
  <link rel="icon" href="../img/favicon.ico">
  <style>
    /* =========== Paleta base (igual al index) =========== */
    :root{
      --bg:#f8fafc;           /* claro por defecto */
      --panel:#ffffff;
      --ink:#0b1220;
      --muted:#475569;
      --line:#cbd5e1;
      --acc:#22d3ee;          /* cian */
      --acc-2:#a78bfa;        /* violeta */
      --warn:#f59e0b;         /* ámbar */
      --ok:#34d399;           /* verde */
      /* Copiar */
      --btn-copy-bg:#0f172a;  /* fondo botón copiar (claro) */
      --btn-copy-ink:#e6edf3; /* texto botón copiar (claro) */
      --code-bg:#0b1220;      /* fondo code en claro (oscuro suave) */
      --code-ink:#e6edf3;
      --chip-bg:#eef2ff;      /* chips breadcrumb claros */
      --chip-ink:#1e293b;
    }
    html[data-theme="dark"]{
      --bg:#0b1220;
      --panel:#0f172a;
      --ink:#e6edf3;
      --muted:#98a2b3;
      --line:#22314c;
      --btn-copy-bg:#1f2937;  /* fondo botón copiar en oscuro */
      --btn-copy-ink:#e5e7eb;
      --code-bg:#0a0f1a;
      --code-ink:#e6edf3;
      --chip-bg:#111827;
      --chip-ink:#e5e7eb;
    }

    *{box-sizing:border-box}
    html{height:100%;scroll-behavior:smooth}
    body{
      height:100%;margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;
      background:var(--bg);color:var(--ink)
    }
    a{color:var(--acc);text-decoration:none}
    a:hover{text-decoration:underline}
    img{max-width:100%;display:block}
    .wrap{max-width:1200px;margin:0 auto;padding:0 20px}

    /* =========== Header minimal, sticky =========== */
    header{position:sticky;top:0;z-index:50;background:rgba(248,250,252,.7);backdrop-filter:blur(10px);border-bottom:1px solid var(--line)}
    html[data-theme="dark"] header{ background:rgba(11,18,32,.6); }
    nav{display:flex;align-items:center;justify-content:space-between;height:64px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.3px}
    .brand .dot{width:10px;height:10px;border-radius:50%;background:linear-gradient(90deg,var(--acc),var(--acc-2))}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;background:var(--acc);color:#05131e;font-weight:700;border:none}
    .btn.ghost{background:transparent;border:1px solid var(--line);color:var(--ink)}
    .mode{background:transparent;border:1px solid var(--line);color:var(--ink);padding:6px 10px;border-radius:10px;margin-left:8px;cursor:pointer}

    /* =========== Hero (igual al index) =========== */
    .hero{position:relative;overflow:hidden}
    .hero .inner{display:grid;gap:24px;grid-template-columns:1.1fr .9fr;align-items:center;padding:36px 0 12px}
    .title{font-size:clamp(28px,4.5vw,48px);line-height:1.1;margin:0}
    .lead{color:var(--muted);margin:0}
    .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:10px}
    .blob{
      position:absolute;inset:-20% auto auto -10%;width:60vw;height:60vw;filter:blur(80px);
      background:
        radial-gradient(circle at 30% 30%,rgba(34,211,238,.25),transparent 60%),
        radial-gradient(circle at 70% 60%,rgba(167,139,250,.22),transparent 60%);
      pointer-events:none
    }
    .avatar{width:140px;height:140px;border-radius:12px;border:2px solid var(--line);background:#0b1220;margin-left:auto;object-fit:cover}

    /* =========== Secciones y básicos =========== */
    section{padding:28px 0;scroll-margin-top:80px}
    h2{font-size:22px;margin:0 0 12px}
    .muted{color:var(--muted)}
    .panel{background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:16px}
    .grid{display:grid;gap:16px}
    .cards{grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:16px;overflow:hidden}
    .card img{width:100%;height:280px;object-fit:cover}
    .row{display:flex;flex-wrap:wrap;gap:8px}
    .tag{font-size:12px;color:var(--muted);border:1px solid var(--line);padding:6px 8px;border-radius:8px}

    /* =========== Breadcrumb con chips =========== */
    .crumbs{display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin:12px 0}
    .crumbs a, .crumbs span[aria-current="page"]{
      display:inline-flex;align-items:center;gap:6px;
      padding:6px 12px;border-radius:999px;border:1px solid var(--line);
      background:var(--chip-bg);color:var(--chip-ink);text-decoration:none
    }
    .crumbs .sep{opacity:.5;color:var(--muted);padding:0 2px}

    /* =========== Código + botón copiar =========== */
    pre{
      position:relative;margin:0;padding:14px;border:1px solid var(--line);
      background:var(--code-bg);border-radius:12px;overflow:auto
    }
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;color:var(--code-ink);font-size:13.5px}
    .copy{
      position:absolute;right:10px;top:10px;padding:7px 10px;border-radius:8px;border:1px solid var(--line);
      background:var(--btn-copy-bg);color:var(--btn-copy-ink);cursor:pointer;font-size:12px
    }
    .copy:hover{opacity:.9}

    /* =========== Procedimiento realizado (steps) =========== */
    .steps{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .step{
      position:relative;background:var(--panel);border:1px solid var(--line);
      border-radius:16px;padding:16px
    }
    .step::before{
      content:attr(data-step);
      position:absolute;left:16px;top:16px;width:28px;height:28px;border-radius:999px;
      display:grid;place-items:center;font-weight:700;background:linear-gradient(90deg,var(--acc),var(--acc-2));color:#05131e
    }
    .step h3{margin:0 0 8px 44px}
    .figure{margin-top:8px;border:1px solid var(--line);border-radius:10px;overflow:hidden}
    .figure figcaption{padding:8px 10px;color:var(--muted);font-size:13px;border-top:1px solid var(--line);background:rgba(0,0,0,.03)}
    html[data-theme="dark"] .figure figcaption{ background:rgba(255,255,255,.03); }

    /* =========== Footer & toTop =========== */
    footer{padding:28px 0 48px;color:var(--muted);border-top:1px solid var(--line)}
    #toTop{position:fixed;right:16px;bottom:16px;display:none;align-items:center;gap:6px;padding:10px 12px;border-radius:999px;border:1px solid var(--line);background:rgba(15,23,42,.75);color:#fff}

    /* =========== Responsivo: móviles =========== */
    @media (max-width: 900px){
      .hero .inner{ grid-template-columns: 1fr; padding:24px 0 8px; }
      .avatar{ margin: 12px auto 0; }
      .cards{ grid-template-columns: 1fr; }
      .steps{ grid-template-columns: 1fr; gap:12px; }
      .step{ padding:12px 12px 12px 44px; }           /* espacio para el badge */
      .step::before{ top:12px; left:12px; width:26px; height:26px; }
      .step h3{ margin:0 0 8px 0; padding-left:0; font-size:17px; }
      .figure{ margin-top:8px; border-radius:8px; }
      pre{ padding:10px; border-radius:8px; }
      code{ font-size:12.5px; white-space:pre-wrap; word-break:break-word; }
      .copy{ padding:6px 9px; font-size:12px; right:6px; top:6px; }
      .crumbs{ gap:6px; }
    }
    @media (max-width: 380px){
      .step{ padding-left:40px; }
      .step::before{ width:24px; height:24px; font-size:13px; }
      code{ font-size:12px; }
    }
  </style>
</head>
<body>
  <!-- Header minimal -->
  <header>
    <div class="wrap">
      <nav>
        <div class="brand"><span class="dot"></span> <span>Marco A. Muñiz — Proyecto</span></div>
        <div style="display:flex;align-items:center;gap:8px">
          <a class="btn ghost" href="../index.html#proyectos">← Volver</a>
          <button id="mode" class="mode" aria-label="Tema">☼</button>
        </div>
      </nav>
    </div>
  </header>

  <!-- Hero del proyecto -->
  <div class="hero">
    <div class="blob" aria-hidden="true"></div>
    <div class="wrap inner">
      <div>
        <span class="chip" style="border-radius:999px;padding:6px 10px;border:1px solid var(--line);color:var(--muted);display:inline-block">Proyecto</span>
        <h1 class="title">ICT Ticket Fallas</h1>
        <p class="lead">ICT, disminución de tiempos de análisis con tickets de falla automáticos.</p>
        <div class="cta">
          <a class="btn" href="../index.html#proyectos">← Volver</a>
          <!-- Cambia esta URL si tienes repo público -->
          <a class="btn ghost" href="https://github.com/tuusuario/tu-repo" target="_blank" rel="noopener">Ver en GitHub</a>
        </div>
      </div>
      <div>
        <img class="avatar" alt="Imagen representativa del proyecto" src="../img/ICT-proyecto1-main.png" />
      </div>
    </div>
  </div>

  <!-- Breadcrumb -->
  <div class="wrap" style="margin-top:10px">
    <nav class="crumbs" aria-label="breadcrumb">
      <a href="../index.html">Inicio</a>
      <span class="sep">›</span>
      <a href="../index.html#proyectos">Proyectos</a>
      <span class="sep">›</span>
      <span aria-current="page">ICT Ticket Fallas</span>
    </nav>
  </div>

  <!-- Contenido principal -->
  <main class="wrap">
    <!-- Resumen -->
    <section>
      <h2>Resumen</h2>
      <div class="panel">
        <p>
          Describe el problema, la solución, restricciones y el impacto (p. ej., mejora de FPY, reducción de MTTR, integración con MES/IMES, etc.).
        </p>
        <div class="row" style="margin-top:8px">
          <span class="tag">ASP.NET</span>
          <span class="tag">WPF</span>
          <span class="tag">SQL Server</span>
          <span class="tag">REST</span>
          <span class="tag">ICT/FCT</span>
        </div>
      </div>
    </section>

    <!-- Arquitectura -->
    <section>
      <h2>Arquitectura</h2>
      <div class="grid cards">
        <div class="card"><img src="../img/arquitectura_1.png" alt="Arquitectura general"></div>
        <div class="card"><img src="../img/flujo_datos_1.png" alt="Flujo de datos"></div>
      </div>
    </section>

    <!-- Procedimiento realizado -->
    <section>
      <h2>Procedimiento realizado</h2>
      <div class="steps">
        <!-- Paso 1 -->
        <article class="step" data-step="1">
          <h3>Definición del flujo e identificación de puntos de falla</h3>
          <p class="muted">Revisión de logs, mapeo de testplan ICT y tiempos de diagnóstico. Se definieron categorías de falla y severidades.</p>
          <figure class="figure">
            <img src="../img/proc_1.png" alt="Mapa de flujo / Ishikawa" />
            <figcaption>Mapa de flujo y categorías priorizadas.</figcaption>
          </figure>
        </article>
        <!-- Paso 2 -->
        <article class="step" data-step="2">
          <h3>Diseño del ticket y payload al backend</h3>
          <p class="muted">Normalización de campos: línea, fixture, testpoint, operador, timestamp, etc.</p>
          <pre><button class="copy" data-copy>Copiar</button><code>{
  "station":"ICT-01",
  "fixture":"FX-245",
  "serial":"SN123456",
  "testpoint":"TP_39",
  "error":"Open on U5",
  "severity":"H",
  "timestamp":"2025-01-30T10:33:22Z"
}</code></pre>
        </article>
        <!-- Paso 3 -->
        <article class="step" data-step="3">
          <h3>Servicio de ingesta y persistencia</h3>
          <p class="muted">Endpoint REST (.NET) → validación → inserción en SQL Server con índices por fecha/estación.</p>
          <pre><button class="copy" data-copy>Copiar</button><code>POST /api/tickets
Content-Type: application/json

{ ...payload... }</code></pre>
        </article>
        <!-- Paso 4 -->
        <article class="step" data-step="4">
          <h3>Dashboard Andon y alertas</h3>
          <p class="muted">Panel con MTTR/MTBF, severidades, filtro por estación; alertas por Teams/Email.</p>
          <figure class="figure">
            <img src="../img/proc_4.png" alt="Dashboard Andon" />
            <figcaption>Andon con métricas y filtros.</figcaption>
          </figure>
        </article>
      </div>
    </section>

    <!-- Galería -->
    <section>
      <h2>Galería</h2>
      <div class="grid cards">
        <div class="card"><img src="../img/captura_1.png" alt="Captura 1"></div>
        <div class="card"><img src="../img/captura_2.png" alt="Captura 2"></div>
        <div class="card"><img src="../img/captura_3.png" alt="Captura 3"></div>
      </div>
    </section>

    <!-- Detalles técnicos -->
    <section>
      <h2>Detalles técnicos</h2>
      <div class="panel">
        <ul>
          <li>Lenguajes/Frameworks: C#, ASP.NET, WPF (MVVM), SQL Server/SQLite.</li>
          <li>Integraciones: Endpoints REST con MES/IMES, testplan ICT Keysight.</li>
          <li>Testing: ICT/FCT, SPC, validación de fixtures, golden units.</li>
          <li>Observabilidad: logs, métricas (MTTR/MTBF), dashboard Andon.</li>
        </ul>
      </div>
    </section>

    <!-- Resultados -->
    <section>
      <h2>Resultados</h2>
      <div class="panel">
        <p>Ejemplos: +X% FPY, –Y% MTTR, –Z% scrap, ahorro de N horas/semana con automatizaciones.</p>
      </div>
    </section>
  </main>

  <!-- Botón subir -->
  <div id="toTop">▲ Arriba</div>

  <!-- Footer -->
  <footer>
    <div class="wrap">© <span id="year"></span> Marco Antonio Muñiz Abad · Hecho con HTML/CSS/JS · Publicado en GitHub Pages</div>
  </footer>

  <script>
    // Año dinámico
    document.getElementById('year').textContent = new Date().getFullYear();

    // ===== Tema: claro por defecto; respeta preferencia guardada =====
    const modeBtn = document.getElementById('mode');
    function applyTheme(isDark){
      document.documentElement.dataset.theme = isDark ? 'dark' : 'light';
      if (modeBtn) modeBtn.textContent = isDark ? '🌙' : '☀️';
    }
    (function initTheme(){
      const saved = localStorage.getItem('theme');
      const isDark = saved ? (saved === 'dark') : false; // claro por defecto
      applyTheme(isDark);
    })();
    if (modeBtn){
      modeBtn.addEventListener('click', ()=>{
        const nowDark = (document.documentElement.dataset.theme !== 'dark');
        applyTheme(nowDark);
        localStorage.setItem('theme', nowDark ? 'dark' : 'light');
      });
    }

    // ===== Botón copiar en bloques de código =====
    document.querySelectorAll('[data-copy]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const code = btn.nextElementSibling?.innerText || '';
        navigator.clipboard.writeText(code).then(()=>{
          const old = btn.textContent;
          btn.textContent = '¡Copiado!';
          setTimeout(()=> btn.textContent = old, 1200);
        });
      });
    });

    // ===== Botón subir =====
    const toTop = document.getElementById('toTop');
    window.addEventListener('scroll', ()=>{
      toTop.style.display = window.scrollY > 500 ? 'inline-flex' : 'none';
    });
    toTop.addEventListener('click', ()=>window.scrollTo({top:0,behavior:'smooth'}));
  </script>
</body>
</html>
