<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ICT Proyecto Piezas de Confianza — Golden & Red</title>
  <meta name="description" content="Caso completo: validación automática con Golden & Red al inicio de cada turno en ICT Keysight i3070." />
  <meta name="theme-color" content="#f8fafc" id="themeColor">
  <link rel="icon" href="../img/favicon.ico">
  <style>
    /* =========== Paleta base =========== */
    :root{
      --bg:#f8fafc;
      --panel:#ffffff;
      --ink:#0b1220;
      --muted:#475569;
      --line:#cbd5e1;
      --acc:#22d3ee;
      --acc-2:#a78bfa;
      --warn:#f59e0b;
      --ok:#34d399;
      /* Copiar */
      --btn-copy-bg:#0f172a;
      --btn-copy-ink:#e6edf3;
      --code-bg:#0b1220;
      --code-ink:#e6edf3;
      --chip-bg:#eef2ff;
      --chip-ink:#1e293b;
    }
    html[data-theme="dark"]{
      --bg:#0b1220;
      --panel:#0f172a;
      --ink:#e6edf3;
      --muted:#98a2b3;
      --line:#22314c;
      --btn-copy-bg:#1f2937;
      --btn-copy-ink:#e5e7eb;
      --code-bg:#0a0f1a;
      --code-ink:#e6edf3;
      --chip-bg:#111827;
      --chip-ink:#e5e7eb;
    }

    *{box-sizing:border-box}
    html{height:100%;scroll-behavior:smooth}
    body{
      height:100%;margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;
      background:var(--bg);color:var(--ink)
    }
    a{color:var(--acc);text-decoration:none}
    a:hover{text-decoration:underline}
    img{max-width:100%;display:block}
    .wrap{max-width:1200px;margin:0 auto;padding:0 20px}

    /* =========== Header minimal, sticky =========== */
    header{position:sticky;top:0;z-index:50;background:rgba(248,250,252,.7);backdrop-filter:blur(10px);border-bottom:1px solid var(--line)}
    html[data-theme="dark"] header{ background:rgba(11,18,32,.6); }
    nav{display:flex;align-items:center;justify-content:space-between;height:64px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.3px}
    .brand .dot{width:10px;height:10px;border-radius:50%;background:linear-gradient(90deg,var(--acc),var(--acc-2))}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;background:var(--acc);color:#05131e;font-weight:700;border:none;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid var(--line);color:var(--ink)}
    .mode{background:transparent;border:1px solid var(--line);color:var(--ink);padding:6px 10px;border-radius:10px;margin-left:8px;cursor:pointer}

    /* Chips reutilizables */
    .chip{
      display:inline-flex;align-items:center;gap:6px;
      padding:6px 10px;border-radius:999px;border:1px solid var(--line);
      background:var(--chip-bg);color:var(--chip-ink);font-size:12.5px
    }

    /* Accesible focus */
    :where(a,button).btn:focus-visible,
    :where(.mode,.copy,#toTop,a,button):focus-visible{
      outline:2px solid var(--acc);outline-offset:2px
    }

    .btn.ghost:hover{background:rgba(0,0,0,.04)}
    html[data-theme="dark"] .btn.ghost:hover{background:rgba(255,255,255,.04)}

    /* =========== Hero =========== */
    .hero{position:relative;overflow:hidden}
    .hero .inner{display:grid;gap:24px;grid-template-columns:1.1fr .9fr;align-items:center;padding:36px 0 12px}
    .title{font-size:clamp(28px,4.5vw,48px);line-height:1.1;margin:0}
    .lead{color:var(--muted);margin:0}
    .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:10px}
    .blob{
      position:absolute;inset:-20% auto auto -10%;width:60vw;height:60vw;filter:blur(80px);
      background:
        radial-gradient(circle at 30% 30%,rgba(34,211,238,.25),transparent 60%),
        radial-gradient(circle at 70% 60%,rgba(167,139,250,.22),transparent 60%);
      pointer-events:none
    }
    .avatar{width:140px;height:140px;border-radius:12px;border:2px solid var(--line);background:#0b1220;margin-left:auto;object-fit:cover}

    /* =========== Secciones y básicos =========== */
    section{padding:28px 0;scroll-margin-top:80px}
    h2{font-size:22px;margin:0 0 12px}
    .muted{color:var(--muted)}
    .panel{background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:16px}
    .grid{display:grid;gap:16px}
    .cards{grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:16px;overflow:hidden;position:relative}

    /* === Miniaturas sin recorte (contain) === */
    .thumb{
      width:100%;
      /* altura responsiva: no afecta el layout general */
      height:clamp(200px, 28vw, 320px);
      display:grid;place-items:center;
      background:linear-gradient(180deg, rgba(0,0,0,.02), rgba(0,0,0,.04));
    }
    html[data-theme="dark"] .thumb{ background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.06)); }
    .thumb img{
      width:100%;
      height:100%;
      object-fit:contain; /* <- muestra TODO sin recortar */
      object-position:center;
    }

    /* Botón "Ver completa" sobre la miniatura */
    .view-full{
      position:absolute;right:10px;bottom:10px;
      padding:6px 10px;font-size:12.5px;border-radius:10px;
      border:1px solid var(--line);background:rgba(15,23,42,.65);color:#fff;backdrop-filter:blur(4px);
      display:inline-flex;gap:6px;align-items:center;opacity:0;transform:translateY(4px);
      transition:.2s ease; cursor:pointer;
    }
    .card:hover .view-full{opacity:1;transform:none}
    .view-full:focus-visible{opacity:1;transform:none;outline:2px solid var(--acc)}

    /* Tarjetas antiguas de imágenes (arquitectura) mantienen altura fija y cover */
    .card img.arch{
      width:100%;height:280px;object-fit:cover;
    }

    .row{display:flex;flex-wrap:wrap;gap:8px}
    .tag{font-size:12px;color:var(--muted);border:1px solid var(--line);padding:6px 8px;border-radius:8px}

    /* =========== Breadcrumb con chips =========== */
    .crumbs{display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin:12px 0}
    .crumbs a, .crumbs span[aria-current="page"]{
      display:inline-flex;align-items:center;gap:6px;
      padding:6px 12px;border-radius:999px;border:1px solid var(--line);
      background:var(--chip-bg);color:var(--chip-ink);text-decoration:none
    }
    .crumbs .sep{opacity:.5;color:var(--muted);padding:0 2px}

    /* =========== Código + botón copiar =========== */
    pre{
      position:relative;margin:0;padding:14px;border:1px solid var(--line);
      background:var(--code-bg);border-radius:12px;overflow:auto;padding-top:38px
    }
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;color:var(--code-ink);font-size:13.5px;white-space:pre}
    .copy{
      position:absolute;right:8px;top:8px;padding:7px 10px;border-radius:8px;border:1px solid var(--line);
      background:var(--btn-copy-bg);color:var(--btn-copy-ink);cursor:pointer;font-size:12px;box-shadow:0 1px 2px rgba(0,0,0,.25)
    }
    .copy:hover{opacity:.9}
    .copy:active{transform:scale(.98)}

    /* =========== Procedimiento: 1 columna y alineado =========== */
    .steps{display:grid;grid-template-columns:1fr;gap:16px;width:100%;margin:0;box-sizing:border-box}
    .step{position:relative;background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:16px;box-sizing:border-box;overflow:hidden}
    .step::before{
      content:attr(data-step);
      position:absolute;left:16px;top:16px;width:28px;height:28px;border-radius:999px;
      display:grid;place-items:center;font-weight:700;
      background:linear-gradient(90deg,var(--acc),var(--acc-2));color:#05131e
    }
    .step h3{margin:0 0 8px 44px}
    .figure{margin-top:8px;border:1px solid var(--line);border-radius:10px;overflow:hidden}
    .figure figcaption{padding:8px 10px;color:var(--muted);font-size:13px;border-top:1px solid var(--line);background:rgba(0,0,0,.03)}
    html[data-theme="dark"] .figure figcaption{ background:rgba(255,255,255,.03); }

    /* =========== Footer & toTop =========== */
    footer{padding:28px 0 48px;color:var(--muted);border-top:1px solid var(--line)}
    #toTop{position:fixed;right:16px;bottom:16px;display:none;align-items:center;gap:6px;padding:10px 12px;border-radius:999px;border:1px solid var(--line);background:rgba(15,23,42,.75);color:#fff}

    /* =========== Lightbox (dialog) =========== */
    dialog#lightbox{
      border:none;padding:0;margin:0;
      width:min(96vw,1200px);max-width:96vw;
      background:transparent;
    }
    dialog#lightbox::backdrop{
      background:rgba(0,0,0,.65);
      backdrop-filter:blur(2px);
    }
    .lb-wrap{
      position:relative;background:var(--panel);border:1px solid var(--line);border-radius:14px;overflow:hidden;
    }
    .lb-toolbar{
      position:absolute;top:8px;right:8px;display:flex;gap:8px;
    }
    .lb-btn{
      background:rgba(15,23,42,.8);color:#fff;border:1px solid var(--line);
      border-radius:10px;padding:8px 10px;font-size:13px;cursor:pointer
    }
    .lb-img{
      width:100%;height:80vh;max-height:80vh;object-fit:contain;background:#000;
    }
    .lb-caption{padding:10px 12px;font-size:13px;color:var(--muted);border-top:1px solid var(--line);background:var(--panel)}

    /* =========== Responsivo =========== */
    @media (max-width: 900px){
      .hero .inner{ grid-template-columns: 1fr; padding:24px 0 8px; }
      .avatar{ margin: 12px auto 0; }
      .cards{ grid-template-columns: 1fr; }
      .steps{ gap:12px; }
      .step{ padding:12px; }
      .step::before{ top:12px; left:12px; width:26px; height:26px; }
      .step h3{ margin:0 0 8px 44px; }
      .figure{ margin-top:8px; border-radius:8px; }
      pre{ padding:10px; border-radius:8px; }
      code{ font-size:12.5px; white-space:pre-wrap; word-break:break-word; }
      .copy{ padding:6px 9px; font-size:12px; right:6px; top:6px; }
      .crumbs{ gap:6px; }
    }
    @media (max-width: 380px){
      .step{ padding-left:12px; }
      .step::before{ width:24px; height:24px; font-size:13px; }
      code{ font-size:12px; }
    }
  </style>
</head>
<body>
  <!-- Header minimal -->
  <header>
    <div class="wrap">
      <nav>
        <div class="brand"><span class="dot"></span> <span>Marco A. Muñiz — Proyecto</span></div>
        <div style="display:flex;align-items:center;gap:8px">
          <a class="btn ghost" href="../index.html#proyectos">← Volver</a>
          <button id="mode" class="mode" aria-label="Tema">☼</button>
        </div>
      </nav>
    </div>
  </header>

  <!-- Hero del proyecto -->
  <div class="hero">
    <div class="blob" aria-hidden="true"></div>
    <div class="wrap inner">
      <div>
        <span class="chip">Proyecto</span>
        <h1 class="title">ICT Piezas de Confianza — Golden & Pieza Red</h1>
        <p class="lead">Validación automática al inicio de cada turno para asegurar que el ICT opera correctamente.</p>
        <div class="cta">
          <a class="btn" href="../index.html#proyectos">← Volver</a>
          <a class="btn ghost" href="https://github.com/tuusuario/tu-repo" target="_blank" rel="noopener">Ver en GitHub</a>
        </div>
      </div>
      <div>
        <img class="avatar" loading="lazy" decoding="async" alt="Imagen representativa del proyecto 2" src="../img/ICT-proyecto2-main.png" />
      </div>
    </div>
  </div>

  <!-- Breadcrumb -->
  <div class="wrap" style="margin-top:10px">
  <!-- Aviso de confidencialidad -->
<div class="panel" style="margin-bottom:20px; border-left:4px solid var(--warn); background:rgba(245,158,11,.08)">
  <p style="margin:0; font-size:14.5px; line-height:1.5; color:var(--muted)">
    🔒 <strong>Aviso:</strong> Parte de la información técnica y de negocio de la empresa ha sido 
    <u>omitida u ocultada</u> en este documento por motivos de 
    <strong>derechos de propiedad intelectual</strong> y confidencialidad.
  </p>
</div>

    <nav class="crumbs" aria-label="breadcrumb">
      <a href="../index.html">Inicio</a>
      <span class="sep">›</span>
      <a href="../index.html#proyectos">Proyectos</a>
      <span class="sep">›</span>
      <span aria-current="page">ICT Piezas de Confianza</span>
    </nav>
  </div>

  <!-- Contenido principal -->
  <main class="wrap">
    <!-- Resumen -->
    <section>
      <h2>Resumen</h2>
      <div class="panel">
        <p>
          Antes, el proceso ICT no validaba automáticamente con <strong>Golden</strong> ni <strong>Red</strong> al inicio de turno.
          Se implementó una función en el <em>testplan</em> para exigir estas liberaciones por <strong>fixture</strong> y turno,
          bloqueando la serialización hasta completar ambas validaciones.
        </p>
        <div class="row" style="margin-top:8px">
          <span class="tag">ICT Keysight i3070</span>
          <span class="tag">Golden Unit</span>
          <span class="tag">Red</span>
          <span class="tag">Testplan</span>
          <span class="tag">Automatización</span>
        </div>
      </div>
    </section>

    <!-- Arquitectura -->
    <section>
      <h2>Arquitectura</h2>
      <ul>
        <li><strong>Equipo base:</strong> ICT Keysight i3070.</li>
        <li><strong>Rutas por fixture:</strong> <code>C:\infoict\Golden\{fixture}.txt</code> y <code>C:\infoict\RedRabbit\{fixture}.txt</code>.</li>
        <li><strong>Marcadores de estado:</strong> cada archivo contiene <code>OK</code> para liberar el turno.</li>
        <li><strong>Bloqueo de serialización:</strong> se desactiva hasta que Golden y Red pasen.</li>
      </ul>
      <div class="grid cards">
        <div class="card"><img class="arch" loading="lazy" decoding="async" src="../img/ICT-proyecto2-arquitectura.png" alt="Arquitectura general Proyecto 2"></div>
        <div class="card"><img class="arch" loading="lazy" decoding="async" src="../img/ICT-proyecto2-diagramadeflujo.png" alt="Flujo de validación"></div>
      </div>
    </section>

    <!-- Procedimiento realizado -->
    <section>
      <h2>Procedimiento realizado</h2>
      <div class="steps">
        <!-- Paso 1 -->
        <article class="step" data-step="1">
          <h3>Definición del flujo e identificación de puntos de falla</h3>
          <p class="muted">Revisión de logs, mapeo del testplan ICT y tiempos de diagnóstico. Se definieron categorías y severidades.</p>
          <figure class="figure">
            <img loading="lazy" decoding="async" src="../img/ICT-proyecto2-diagramadeflujo.png" alt="Mapa de flujo / Ishikawa" />
            <figcaption>Mapa de flujo y categorías priorizadas.</figcaption>
          </figure>
        </article>

        <!-- Paso 2 -->
        <article class="step" data-step="2">
          <h3>Parámetros y variables globales</h3>
          <p class="muted">Se declaran globales y seriales de referencia para Golden y Red.</p>
          <pre><button class="copy" data-copy>Copiar</button><code>sub Golden (Pedir_Golden, Checar_Serial, Validacion_Golden)
global Imprimir_Golden, Panel_Serial$, Fix_Id_Auto$, Validacion, Serializing
Validacion = 0
Serial_Golden$ = "P11111111-1_SN111111111"!Serial ficticio 
Serial_Red_Rabbit$ = "P11111111-1_SN111111111"!Serial ficticio </code></pre>
Serial_Red_Rabbit$ = "P11111111-1_SN111111111"!Serial ficticio </code></pre>
        </article>

        <!-- Paso 3 -->
        <article class="step" data-step="3">
          <h3>Solicitud de liberación por turno (Pedir_Golden)</h3>
          <p class="muted">Si los archivos del fixture no contienen <code>OK</code>, se bloquea serialización y se pide correr Golden/Red.</p>
          <pre><button class="copy" data-copy>Copiar</button><code>if Pedir_Golden then
  Fixt$ = "C:\\infoict\\Golden\\" &amp; Fix_Id_Auto$ &amp; ".txt"
  enter Fixt$; Liberacion$
  if Liberacion$ &lt;&gt; "OK" then
    Serializing = 0
    print using "@"
    L$ = chr$(27) &amp; "&amp;v3S"
    print tab(8); L$ &amp; "*********CAMBIO DE TURNO O FIXTURE**********"
    print tab(8); L$ &amp; "**********LIBERE CON PIEZA GOLDEN***********"
  end if

  Fixt$ = "C:\\infoict\\RedRabbit\\" &amp; Fix_Id_Auto$ &amp; ".txt"
  enter Fixt$; Dato$
  if Dato$ &lt;&gt; "OK" and Liberacion$ = "OK" then
    Serializing = 0
    L$ = chr$(27) &amp; "&amp;v3S"
    print using "@"
    print tab(8); L$ &amp; "********LIBERE CON PIEZA Red**********"
  end if
end if</code></pre>
        </article>

        <!-- Paso 4 -->
        <article class="step" data-step="4">
          <h3>Verificación de serial en línea (Checar_Serial)</h3>
          <p class="muted">Si el archivo no es <code>OK</code>, se exige que la pieza en estación coincida con el serial Golden/Red.</p>
          <pre><button class="copy" data-copy>Copiar</button><code>if Checar_Serial then
  !---Liberacion Golden &amp; RedRabbit Boards-----------OOB

  Fixt$ = "C:\\infoict\\Golden\\" &amp; Fix_Id_Auto$ &amp; ".txt"
  enter Fixt$; Liberacion$
  if Liberacion$ &lt;&gt; "OK" then
    if Panel_Serial$ = Serial_Golden$ then
      print using "@": L$ = chr$(27) &amp; "&amp;v2S"
      print tab(8); L$ &amp; "PIEZA GOLDEN ENCONTRADA, ESPERE A QUE TERMINE LA PRUEBA"
      wait 3
    else
      print using "@": L$ = chr$(27) &amp; "&amp;v1S"
      print tab(8); L$ &amp; "LIBERACION RECHAZADA: NO ES LA GOLDEN"
      print tab(8); L$ &amp; "******LIBERE CON PIEZA GOLDEN*********"
      wait 3
      Validacion = 1
    end if
  end if

  Fixt$ = "C:\\infoict\\RedRabbit\\" &amp; Fix_Id_Auto$ &amp; ".txt"
  enter Fixt$; Dato$
  if Dato$ &lt;&gt; "OK" and Liberacion$ = "OK" then
    if Panel_Serial$ = Serial_Red_Rabbit$ then
      print using "@": L$ = chr$(27) &amp; "&amp;v2S"
      print tab(8); L$ &amp; "PIEZA RED ENCONTRADA, ESPERE A QUE TERMINE LA PRUEBA"
      wait 5
    else
      print using "@": L$ = chr$(27) &amp; "&amp;v1S"
      print tab(8); L$ &amp; "LIBERACION RECHAZADA: NO ES LA PIEZA RED "
      print tab(8); L$ &amp; "*******LIBERE CON PIEZA RED ********"
      Validacion = 1
    end if
  end if

  !---Liberacion Golden &amp; RedRabbit Boards-----------OOB
end if</code></pre>
        </article>

        <!-- Paso 5 -->
        <article class="step" data-step="5">
          <h3>Validación y marcado de estado (Validacion_Golden)</h3>
          <p class="muted">Se escribe <code>C:\infoict\Validacion.txt</code> con el tipo de pieza y se muestra estatus.</p>
          <pre><button class="copy" data-copy>Copiar</button><code>if Validacion_Golden then
  !----------------------INICIO VALIDACION GOLDEN-------------------------------
  if Panel_Serial$ = Serial_Golden$ then
    Liberacion$ = "C:\\infoict\\Validacion.txt"
    output Liberacion$; "Golden"
    ChecarGold$ = "C:\\infoict\\Golden\\" &amp; Fix_Id_Auto$ &amp; ".txt"
    L$ = chr$(27) &amp; "&amp;v3S"
    print tab(8); L$ &amp; "Verificando Golden..."
    wait 5
    enter ChecarGold$; Dato$
    if Dato$ = "OK" then
      L$ = chr$(27) &amp; "&amp;v2S"
      print tab(8); L$ &amp; "************GOLDEN OK************"
      wait 4
    else
      L$ = chr$(27) &amp; "&amp;v1S"
      print tab(8); L$ &amp; "**********PIEZA GOLDEN FALLO**********"
      L$ = chr$(27) &amp; "&amp;v3S"
      print tab(8); L$ &amp; "*******LLAME AL ING. DE PRUEBAS*******"
      wait 4
    end if
  end if
  !-----------------------FINAL VALIDACION GOLDEN--------------------------------

  !---------------------INICIO VALIDACION RED-----------------------------
  if Panel_Serial$ = Serial_Red_Rabbit$ then
    Liberacion$ = "C:\\infoict\\Validacion.txt"
    output Liberacion$; "RedRabbit"
    ChecarRed$ = "C:\\infoict\\RedRabbit\\" &amp; Fix_Id_Auto$ &amp; ".txt"
    L$ = chr$(27) &amp; "&amp;v3S"
    print tab(8); L$ &amp; "Verificando Pieza Red..."
    wait 5
    enter ChecarRed$; Dato$
    if Dato$ = "OK" then
      L$ = chr$(27) &amp; "&amp;v2S"
      print tab(8); L$ &amp; "************Red OK************"
      wait 4
    else
      FallasrRed$ = "C:\\infoict\\FallaMasters.txt"
      enter FallasrRed$; RedRabbit$
      L$ = chr$(27) &amp; "&amp;v3S"
      print tab(8); L$ &amp; RedRabbit$
      wait 5
      L$ = chr$(27) &amp; "&amp;v1S"
      print tab(8); L$ &amp; "**********PIEZA Red FALLO**********"
      L$ = chr$(27) &amp; "&amp;v3S"
      print tab(8); L$ &amp; "*********LLAME AL ING. DE PRUEBAS*********"
      wait 4
    end if
  end if
  !---------------------FINAL VALIDACION Red-----------------------------
end if</code></pre>
        </article>

        <!-- Paso 6 -->
        <article class="step" data-step="6">
          <h3>Función completa del testplan</h3>
          <p class="muted">Pega tal cual en tu testplan. Ajusta seriales y rutas a tu entorno.</p>
          <pre><button class="copy" data-copy>Copiar</button><code>sub Golden (Pedir_Golden, Checar_Serial, Validacion_Golden)
global Imprimir_Golden
global Panel_Serial$
global Fix_Id_Auto$
global Validacion
global Serializing
Validacion = 0
Serial_Golden$ = "P202020-C-20202020"! SN omitido debido a derechos de cliente
Serial_Red_Rabbit$ = "P202020-C-20202020"! SN omitido debido a derechos de cliente

if Pedir_Golden then
Fixt$=  "C:\\infoict\\Golden\\" &amp; Fix_Id_Auto$ &amp; ".txt"
enter Fixt$; Liberacion$
if Liberacion$ &lt;&gt; "OK" then
  Serializing = 0
  print using "@"
  L$= chr$ (27)&amp; "&amp;v3S"
  print tab (8); L$ &amp;"*********CAMBIO DE TURNO O FIXTURE**********"
  print tab (8); L$ &amp;"**********LIBERE CON PIEZA GOLDEN***********"
end if

Fixt$=  "C:\\infoict\\RedRabbit\\" &amp; Fix_Id_Auto$ &amp; ".txt"
enter Fixt$; Dato$
if Dato$ &lt;&gt; "OK"and Liberacion$ = "OK" then
  Serializing = 0
  L$= chr$ (27)&amp; "&amp;v3S"
  print using "@"
  print tab (8); L$ &amp;"********LIBERE CON PIEZA Red**********"
else
end if
end if

if Checar_Serial then
!---Liberacion Golden &amp; RedRabbit Boards-----------OOB
Fixt$=  "C:\\infoict\\Golden\\" &amp; Fix_Id_Auto$ &amp; ".txt"
enter Fixt$; Liberacion$
if Liberacion$ &lt;&gt; "OK" then
  if  Panel_Serial$=Serial_Golden$ then
     print using "@"
     L$= chr$ (27)&amp; "&amp;v2S"
    print tab (8); L$ &amp;"PIEZA GOLDEN ENCONTRADA, ESPERE A QUE TERMINE LA PRUEBA"
    wait 3
  else
      print using "@"
      L$= chr$ (27)&amp; "&amp;v1S"
     print tab (8); L$ &amp;"LIBERACION RECHAZADA: NO ES LA GOLDEN"
     print tab (8); L$ &amp;"******LIBERE CON PIEZA GOLDEN*********"
      wait 3
     Validacion = 1
  end if
end if

Fixt$=  "C:\\infoict\\RedRabbit\\" &amp; Fix_Id_Auto$ &amp; ".txt"
enter Fixt$; Dato$
if Dato$ &lt;&gt; "OK"and Liberacion$ = "OK" then
  if Panel_Serial$=Serial_Red_Rabbit$ then
    print using "@"
    L$= chr$ (27)&amp; "&amp;v2S"
    print tab (8); L$ &amp;"PIEZA RED ENCONTRADA, ESPERE A QUE TERMINE LA PRUEBA"
     wait 5
  else
     print using "@"
      L$= chr$ (27)&amp; "&amp;v1S"
     print tab (8); L$ &amp;"LIBERACION RECHAZADA: NO ES LA PIEZA RED"
     print tab (8); L$ &amp;"*******LIBERE CON PIEZA RED************"
     Validacion = 1
  end if
end if
!---Liberacion Golden &amp; RedRabbit Boards-----------OOB
end if

if Validacion_Golden then
!----------------------INICIO VALIDACION GOLDEN-------------------------------
if Panel_Serial$=Serial_Golden$ then
     Liberacion$=  "C:\\infoict\\Validacion.txt"
     output Liberacion$; "Golden"
     ChecarGold$= "C:\\infoict\\Golden\\" &amp; Fix_Id_Auto$ &amp; ".txt"
     L$= chr$ (27)&amp; "&amp;v3S"
     print tab (8); L$ &amp; "Verificando Golden..."
     wait 5
     enter ChecarGold$; Dato$
     if Dato$ = "OK" then
        L$= chr$ (27)&amp; "&amp;v2S"
         print tab (8); L$ &amp;"************GOLDEN OK************"
        wait 4
     else
        L$= chr$ (27)&amp; "&amp;v1S"
        print tab (8); L$ &amp; "**********PIEZA GOLDEN FALLO**********"
        L$= chr$ (27)&amp; "&amp;v3S"
        print tab (8); L$ &amp; "*******LLAME AL ING. DE PRUEBAS*******"
        wait 4
     end if
end if
!-----------------------FINAL VALIDACION GOLDEN--------------------------------

!---------------------INICIO VALIDACION RED-----------------------------
if Panel_Serial$=Serial_Red_Rabbit$ then
     Liberacion$=  "C:\\infoict\\Validacion.txt"
     output Liberacion$; "RedRabbit"
     ChecarRed$= "C:\\infoict\\RedRabbit\\" &amp; Fix_Id_Auto$ &amp; ".txt"
     L$= chr$ (27)&amp; "&amp;v3S"
     print tab (8); L$ &amp; "Verificando Pieza Red..."
     wait 5
     enter ChecarRed$; Dato$
     if Dato$ = "OK" then
        L$= chr$ (27)&amp; "&amp;v2S"
        print tab (8); L$ &amp;"************PIEZA RED OK************"
        wait 4
     else
        FallasrRed$= "C:\\infoict\\FallaMasters.txt"
        enter FallasrRed$; RedRabbit$
        L$= chr$ (27)&amp; "&amp;v3S"
        print tab (8); L$ &amp; RedRabbit$
        wait 5
        L$= chr$ (27)&amp; "&amp;v1S"
        print tab (8); L$ &amp; "**********PIEZA RED FALLO**********"
        L$= chr$ (27)&amp; "&amp;v3S"
        print tab (8); L$ &amp; "*********LLAME AL ING. DE PRUEBAS*********"
        wait 4
     end if
end if
!---------------------FINAL VALIDACION Pieza Red-----------------------------
end if
subend</code></pre>
        </article>
      </div>
    </section>

    <!-- Galería -->
    <section>
      <h2>Galería</h2>
      <div class="grid cards" id="galeria">
        <!-- Cada tarjeta usa .thumb (object-fit:contain) y botón "Ver completa" -->
        <div class="card">
          <div class="thumb"><img loading="lazy" decoding="async" src="../img/ICT-proyecto2-captura1.png" alt="Captura 1"></div>
          <button class="view-full" data-full="../img/ICT-proyecto2-captura1.png" aria-label="Ver imagen completa">🔎 Ver completa</button>
        </div>
        <div class="card">
          <div class="thumb"><img loading="lazy" decoding="async" src="../img/ICT-proyecto2-captura2.png" alt="Captura 2"></div>
          <button class="view-full" data-full="../img/ICT-proyecto2-captura2.png" aria-label="Ver imagen completa">🔎 Ver completa</button>
        </div>
        <div class="card">
          <div class="thumb"><img loading="lazy" decoding="async" src="../img/ICT-proyecto2-captura3.png" alt="Captura 3"></div>
          <button class="view-full" data-full="../img/ICT-proyecto2-captura3.png" aria-label="Ver imagen completa">🔎 Ver completa</button>
        </div>
        <div class="card">
          <div class="thumb"><img loading="lazy" decoding="async" src="../img/ICT-proyecto2-captura4.png" alt="Captura 4"></div>
          <button class="view-full" data-full="../img/ICT-proyecto2-captura4.png" aria-label="Ver imagen completa">🔎 Ver completa</button>
        </div>
        <div class="card">
          <div class="thumb"><img loading="lazy" decoding="async" src="../img/ICT-proyecto2-captura5.png" alt="Captura 5"></div>
          <button class="view-full" data-full="../img/ICT-proyecto2-captura5.png" aria-label="Ver imagen completa">🔎 Ver completa</button>
        </div>
        <div class="card">
          <div class="thumb"><img loading="lazy" decoding="async" src="../img/ICT-proyecto2-captura6.png" alt="Captura 6"></div>
          <button class="view-full" data-full="../img/ICT-proyecto2-captura6.png" aria-label="Ver imagen completa">🔎 Ver completa</button>
        </div>
        <div class="card">
          <div class="thumb"><img loading="lazy" decoding="async" src="../img/ICT-proyecto2-captura7.png" alt="Captura 7"></div>
          <button class="view-full" data-full="../img/ICT-proyecto2-captura7.png" aria-label="Ver imagen completa">🔎 Ver completa</button>
        </div>
        <div class="card">
          <div class="thumb"><img loading="lazy" decoding="async" src="../img/ICT-proyecto2-captura8.png" alt="Captura 8"></div>
          <button class="view-full" data-full="../img/ICT-proyecto2-captura8.png" aria-label="Ver imagen completa">🔎 Ver completa</button>
        </div>
      </div>
    </section>

    <!-- Detalles técnicos -->
    <section>
      <h2>Detalles técnicos</h2>
      <div class="panel">
        <ul>
          <li>Lenguajes/Frameworks: lenguaje de testplan i3070, shells/prints.</li>
          <li>Integraciones: archivos de control por fixture, bloqueo de serialización.</li>
          <li>Validaciones: Golden y Pieza Red al inicio de turno/fixture.</li>
          <li>Mensajería al operador vía <code>print</code> con niveles de severidad (v1/v2/v3).</li>
        </ul>
      </div>
    </section>

    <!-- Resultados -->
    <section>
      <h2>Resultados</h2>
      <div class="panel">
        <ul>
          <li>+Confiabilidad: detección temprana de descalibraciones/derivas.</li>
          <li>–Repruebas por setups incorrectos al inicio de turno.</li>
          <li>+Trazabilidad por fixture gracias a marcadores <code>OK</code> en disco.</li>
        </ul>
      </div>
    </section>
  </main>

  <!-- Botón subir -->
  <div id="toTop">▲ Arriba</div>

  <!-- Lightbox -->
  <dialog id="lightbox" aria-label="Visor de imagen completa">
    <div class="lb-wrap">
      <div class="lb-toolbar">
        <a class="lb-btn" id="lb-download" download>⬇ Descargar</a>
        <button class="lb-btn" id="lb-close" aria-label="Cerrar">✕</button>
      </div>
      <img class="lb-img" id="lb-img" alt="">
      <div class="lb-caption" id="lb-caption"></div>
    </div>
  </dialog>

  <!-- Footer -->
  <footer>
    <div class="wrap">© <span id="year"></span> Marco Antonio Muñiz Abad · Hecho con HTML/CSS/JS · Publicado en GitHub Pages</div>
  </footer>

  <script>
    // Año dinámico
    document.getElementById('year').textContent = new Date().getFullYear();

    // ===== Tema claro/oscuro =====
    const modeBtn = document.getElementById('mode');
    const themeMeta = document.getElementById('themeColor');
    function applyTheme(isDark){
      document.documentElement.dataset.theme = isDark ? 'dark' : 'light';
      if (modeBtn) modeBtn.textContent = isDark ? '🌙' : '☀️';
      if (themeMeta) themeMeta.setAttribute('content', isDark ? '#0b1220' : '#f8fafc');
    }
    (function initTheme(){
      const saved = localStorage.getItem('theme');
      const isDark = saved ? (saved === 'dark') : false;
      applyTheme(isDark);
    })();
    if (modeBtn){
      modeBtn.addEventListener('click', ()=>{
        const nowDark = (document.documentElement.dataset.theme !== 'dark');
        applyTheme(nowDark);
        localStorage.setItem('theme', nowDark ? 'dark' : 'light');
      });
    }

    // ===== Botón copiar en bloques de código =====
    document.querySelectorAll('[data-copy]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const code = btn.nextElementSibling?.innerText || '';
        navigator.clipboard.writeText(code).then(()=>{
          const old = btn.textContent;
          btn.textContent = '¡Copiado!';
          setTimeout(()=> btn.textContent = old, 1200);
        });
      });
    });

    // ===== Botón subir =====
    const toTop = document.getElementById('toTop');
    window.addEventListener('scroll', ()=>{
      toTop.style.display = window.scrollY > 500 ? 'inline-flex' : 'none';
    });
    toTop.addEventListener('click', ()=>window.scrollTo({top:0,behavior:'smooth'}));

    // ===== Lightbox para la galería =====
    const lightbox = document.getElementById('lightbox');
    const lbImg = document.getElementById('lb-img');
    const lbCaption = document.getElementById('lb-caption');
    const lbClose = document.getElementById('lb-close');
    const lbDownload = document.getElementById('lb-download');

    function openLightbox(src, alt){
      lbImg.src = src;
      lbImg.alt = alt || '';
      lbCaption.textContent = alt || '';
      lbDownload.href = src;
      lbDownload.setAttribute('download', (alt || 'imagen') + '.png');
      if (typeof lightbox.showModal === 'function') {
        lightbox.showModal();
      } else {
        // Fallback browsers antiguos
        lightbox.setAttribute('open','');
      }
    }
    function closeLightbox(){
      if (typeof lightbox.close === 'function') lightbox.close();
      else lightbox.removeAttribute('open');
      // Limpia la imagen para liberar memoria en móviles
      lbImg.src = '';
    }

    // Click en miniatura o en el botón "Ver completa"
    document.getElementById('galeria').addEventListener('click', (e)=>{
      const card = e.target.closest('.card');
      if (!card) return;

      const img = card.querySelector('.thumb img');
      const btn = e.target.closest('.view-full');

      if (img && (e.target === img || btn)) {
        const src = btn?.dataset.full || img.currentSrc || img.src;
        const alt = img.alt || 'Imagen';
        openLightbox(src, alt);
      }
    });

    // Cerrar por botón, fondo o tecla Esc
    lbClose.addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', (e)=>{ if (e.target === lightbox) closeLightbox(); });
    document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape' && lightbox.open) closeLightbox(); });
  </script>
</body>
</html>
